<?php 	$title = "Solutions";		$css = "	<link rel='stylesheet' type='text/css' href='css/index.css'>	<link rel='stylesheet' type='text/css' href='css/image-upload-dialog.css'>";		$js = "	<script type='text/javascript' src='js/index.js'></script>	<script type='text/javascript' src='js/widget.js'></script>";		require($_SERVER['DOCUMENT_ROOT']."/manager/header.php");		// [SCB]?><div id='main'>		<h1>Gallerize</h1>		<form enctype='multipart/form-data' method='POST' action='upload/' id='upload-file-form'>		<input type='file' name='uploads[]' id='new-image' multiple>	</form>		<div id='gallerize'>		<?php 			$folder = $_SERVER['REQUEST_URI']; // this must contain a folder called images, with image files present			loadImages($folder);	?>	</div></div><div id='image-upload-dialog'>	<h1>Welcome to the image upload tool.</h1>	<p>These are NOT the actual size of your images. These are generated thumbnails, just to represent the image you are wanting to upload.</p>	<p>If you would like to remove an image, or like a different selection of images; close this pop-up and click the file upload button again to choose new files.</p>	<div class='image-container'></div></div><?php 	// [End]	// [SCB]	/** 		Init Image Load.		@param $path (String) Path images are located.	*/	function loadImages ($path, $imgPath = "images/", $lrgImgPath = "large/") {				$images = array();		if ($handle = opendir($_SERVER['DOCUMENT_ROOT'].$path.$imgPath)) {			/* This is the correct way to loop over the directory. */			while (false !== ($entry = readdir($handle))) {								if (!is_dir($entry) && $entry != "large") {										$images[] = "					<div class='image normal' type='normal'>						<a href='".$path.$imgPath.$lrgImgPath.$entry."'>							<img src='".$path.$imgPath.$entry."' title='".$entry." (click to see larger)'>						</a>					</div>";				}			}			closedir($handle);		}				// count the image total		$imgCount = count($images);				// if we have no images output an error		if ($imgCount === 0) {							echo "<div class='ui-state-error'>No Images Found in [".$path."]! Try adding files to the images folder.</div>";		}		else {						$alreadyUsedImages = array();						// go through each image and output it			for ($x=0; $x < $imgCount; $x++) {								// generate a random image				$random = rand(0, $imgCount-1);								// make sure we are not already using the random image				while (in_array($random, $alreadyUsedImages)) {										$random = rand(0, $imgCount-1);				}								// record the image has been used				$alreadyUsedImages[] = $random;								// output the image HTML				echo $images[$random];			}		}	}	// [End]?>